<div>
    <div class="flow-basic-info">
        <div ng-show="vm.isCreating">
             <div class="form-group">
                <label for="name">Flow Name</label>
                <input type="text" class="form-control" ng-model="vm.flow.name" id="name" placeholder="Flow Name"></input>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" ng-model="vm.flow.description" id="description" placeholder="Description"></textarea>
            </div>
        </div>
        <div ng-show="!vm.isCreating">
            <div class="form-group">
                <label for="name">Flow Name</label>
                <span editable-text="vm.flow.name" e-autocomplete="off" e-name="name" e-class="form-control" e-required>{{ vm.flow.name }}</span>
            </div>
            <div class="form-group">
                <label for="name">Description</label>
                <span editable-textarea="vm.flow.description" e-name="description" e-class="form-control">{{ vm.flow.description || "Description" }}</span>
            </div>
        </div>
    </div>
    <h3>Moves</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Move</th>
                <th>Duration</th>
                <th> </th>
            </tr>
        </thead>
        <tbody ui:sortable ng:model="vm.moveList">
            <tr ng:repeat="moveEntry in vm.moveList" class="item">
                <td>
                    <span editable-text="moveEntry.move" e-autocomplete="off" e-name="name" e-class="form-control" e-form="flowForm" e-required e-typeahead="move as move.name for move in vm.allMoves | filter:$viewValue | limitTo:20" e-typeahead-editable="false" oncancel="vm.removeMove($index)" onbeforesave="vm.checkMove($data)" onaftersave="vm.updateMove($index, $data)">
                        {{moveEntry.move.name}}
                    </span>
                </td>
                <td>
                    <span editable-text="moveEntry.duration" e-name="duration" e-class="form-control" e-form="flowForm" onbeforesave="vm.checkDuration($data)" e-required>
                        {{moveEntry.duration | number:0}}
                    </span>
                </td>
                <td>
                    <form editable-form name="flowForm" ng-show="flowForm.$visible" class="form-buttons form-inline" shown="vm.inserted == moveEntry">
                      <button type="submit" ng-disabled="flowForm.$waiting" title="Ok" class="btn btn-primary">
                        <span class="glyphicon glyphicon-ok"></span>
                      </button>
                      <button type="button" ng-disabled="flowForm.$waiting" ng-click="flowForm.$cancel()" title="Cancel" class="btn btn-default">
                        <span class="glyphicon glyphicon-remove"></span>
                      </button>
                    </form>
                    <div class="buttons" ng-show="!flowForm.$visible">
                      <button class="btn btn-primary" ng-click="flowForm.$show()" title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>
                      <button class="btn btn-danger" ng-click="vm.removeMove($index)" title="Delete"><span class="glyphicon glyphicon-minus"></span></button>
                    </div>  
                </td>
            </tr>
        </tbody>
    </table>
    <button class="btn btn-default" ng-click="vm.addMove()" title="Add Move"><span class="glyphicon glyphicon-plus"></button>
    <button class="btn btn-default" ng-click="vm.randomMove()" title="Random Move"><span class="glyphicon glyphicon-random"></button>

    <div class="inner">
        <div class="alert alert-warning" role="alert" ng-hide="vm.authenticated">
            <strong>Warning:</strong> Because you're not logged in, you won't be able to edit this flow after saving it. <a href="/login" class="alert-link">Login here</a>
        </div>
        <form ng-submit="vm.save()">
            <div class="form-group">
                <div flash-alert="error" active-class="in alert alert-danger" role="alert" class="fade" duration="0">
                    <button type="button" class="close" ng-click="hide()">&times;</button>
                    <strong class="alert-heading">Error</strong>
                    <span class="alert-message">{{flash.message}}</span>
                </div>
                <button type="submit" class="btn btn-default">{{ vm.isCreating ? "Create Flow" : "Update Flow" }}</button>
            </div>
        </form>
    </div>
    <debug class="block">
        <p>{{vm.moveList}}</p>
    </debug>
</div>